<!doctype html>
<html lang="en">
<head>
    <script src="http://d3js.org/d3.v2.min.js"></script>
    <script src="venn.js"></script>
    <script src="underscore.min.js"></script>
    <script src="jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
    <meta charset="utf-8">
    <title>The TV Shows of 2L</title>
</head>

<body>
<div class="list"></div>
<div class="values">
    <table>
    <tr>
      <td>E</td>
      <td>
        <input class="input-mini venn_set" id="e" type="number" value="0">
      </td>
    </tr>
    <tr>
      <td>B</td>
      <td>
        <input class="input-mini venn_set" id="b" type="number" value="16">
      </td>
    </tr>
    <tr>
      <td>C</td>
      <td>
        <input class="input-mini venn_set" id="c" type="number" value="12">
      </td>
    </tr>
    <tr>
      <td>E&#8745B</td>
      <td>
        <input class="input-mini venn_area" id="0,1" type="number" value="4">
      </td>
    </tr>
    <tr>
      <td>E&#8745C</td>
      <td>
        <input class="input-mini venn_area" id="1,2" type="number" value="4">
      </td>
    </tr>
    <tr>
      <td>B&#8745C</td>
      <td>
        <input class="input-mini venn_area" id="0,2" type="number" value="3">
      </td>
    </tr>
    <tr>
      <td>E&#8745B&#8745C&nbsp</td>
      <td>
        <input class="input-mini venn_area" id="0,1,2" type="number" value="2">
      </td>
    </tr>
    </table>
</div>
<div class="dynamic"></div>
<div style="clear: both;"></div>

</body>
<script>
var c = ["the daily show", "bob's burgers", "new girl", "brooklyn nine-nine",
            "sherlock", "adventure time", "top chef", "the good wife",
            "community", "how i met your mother", "justified", "modern family", 
            "parks and recreation", "snl", "broad city", "girls", "eastbound and down"]

var e = ["fringe", "new girl", "brooklyn nine-nine",
            "sherlock", "how i met your mother", "modern family", "a", "b", "c", "d"]

var b = ["bob's burgers", "brooklyn nine-nine", "adventure time",
            "community", "modern family", "parks and recreation", "snl", "rick and morty", 
            "e", "f", "j", "k", "i", "girls", "eastbound and down"]

var all = _.intersection(c, e, b);
var ce = _.difference(_.intersection(c, e), all);
var be = _.difference(_.intersection(e, b), all);
var bc = _.difference(_.intersection(c, b), all);

$("#c").val(c.length);
$("#e").val(e.length);
$("#b").val(b.length);
$("#ce").val(ce.length);
$("#be").val(be.length);
$("#bc").val(bc.length);
$("#all").val(all.length);

//this is the wrong way to do this but don't feel like fixing
var toVar = {"c": c, "e": e, "b": b, "all": all, "ce": ce, "be": be, "bc" :bc };

$(document).ready(function(){
    $(".input-mini").mouseover(function(){
    console.log("hi");
  });
});


function getSetIntersections() {
    areas = d3.selectAll(".venn_area")[0].map(
        function (element) { 
            return { sets: element.id.split(",").map(function(value) { return parseInt(value);}), 
                    size: parseFloat(element.value)};} );
    return areas;
}

function getSets() {
    var sets=[{"label": "E"}, {"label":"B"}, {"label": "C"}], areas = [];
    d3.selectAll(".venn_set")[0].map(
        function(element, i) { sets[i].size = parseFloat(element.value); });
    return sets;
}

var w = Math.min(450, document.documentElement.clientWidth-30), h = 2*w/3;

// draw the initial set
var sets = venn.venn(getSets(), getSetIntersections());
venn.drawD3Diagram(d3.select(".dynamic"), sets, w, h);

// redraw the sets on any change in input
d3.selectAll("input").on("change", function() {
    var sets = venn.venn(getSets(), getSetIntersections());
    venn.updateD3Diagram(d3.select(".dynamic"), sets);
});

</script>
</html>